{% if nodes.is_empty() %}
<div class="bg-grid-850 border border-grid-700/30 border-dashed rounded-xl p-16 text-center">
  <svg class="w-14 h-14 mx-auto text-grid-700 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg>
  <p class="text-lg text-slate-300 font-display font-semibold mb-2">No nodes registered</p>
  <p class="text-sm text-slate-500">Running in standalone mode.</p>
</div>
{% else %}
<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
  {% for n in nodes %}
  <a href="/dashboard/nodes/{{ n.id }}" class="block bg-grid-850 border border-grid-700/30 rounded-xl p-5 hover:border-grid-accent/20 transition-all group">
    <div class="flex items-center justify-between mb-4">
      <span class="font-mono font-medium text-sm text-slate-200 group-hover:text-grid-accent transition-colors">{{ n.id }}</span>
      <span class="inline-flex items-center gap-1.5 text-xs font-medium">
        <span class="w-1.5 h-1.5 rounded-full {% if n.status == "Ready" %}bg-grid-accent glow-green{% elif n.status == "Draining" %}bg-grid-warn glow-amber{% else %}bg-grid-danger glow-red{% endif %}"></span>
        <span class="{{ n.status_color }}">{{ n.status }}</span>
      </span>
    </div>
    <p class="text-xs text-slate-500 font-mono mb-4">{{ n.address }}:{{ n.port }}</p>

    <div class="space-y-3 mb-4">
      <div>
        <div class="flex justify-between text-xs text-slate-500 mb-1">
          <span>Memory</span>
          <span class="font-mono">{{ n.memory_bar.percent_int }}%</span>
        </div>
        <div class="w-full bg-grid-800 rounded-full h-1.5 overflow-hidden">
          <div class="{{ n.memory_bar.bar_color() }} h-1.5 rounded-full progress-bar" style="width: {{ n.memory_bar.percent_display }}%"></div>
        </div>
      </div>
      <div>
        <div class="flex justify-between text-xs text-slate-500 mb-1">
          <span>CPU</span>
          <span class="font-mono">{{ n.cpu_bar.percent_int }}%</span>
        </div>
        <div class="w-full bg-grid-800 rounded-full h-1.5 overflow-hidden">
          <div class="{{ n.cpu_bar.bar_color() }} h-1.5 rounded-full progress-bar" style="width: {{ n.cpu_bar.percent_display }}%"></div>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-between text-xs pt-3 border-t border-grid-700/20">
      <span class="text-slate-500 font-mono">{{ n.instance_count }} instances</span>
      <span class="{{ n.heartbeat_color }} font-mono">{{ n.heartbeat_display }}</span>
    </div>

    {% if !n.labels.is_empty() %}
    <div class="mt-3 flex flex-wrap gap-1.5">
      {% for (key, value) in n.labels %}
      <span class="text-xs px-1.5 py-0.5 bg-grid-800/60 rounded-md font-mono text-slate-500 border border-grid-700/20">{{ key }}={{ value }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </a>
  {% endfor %}
</div>
{% endif %}
